"$schema" = "https://starship.rs/config-schema.json"

add_newline = false
scan_timeout = 30
command_timeout = 800

format = """
[░▒▓](fg:{{ terminal['bright-black'] }}) \
$os\
$username\
$hostname\
$directory\
$git_branch\
$git_status\
$git_state\
$git_metrics\
$fill\
$docker_context\
$kubernetes\
$aws\
$gcloud\
$terraform\
$package\
$nodejs\
$python\
$rust\
$golang\
$php\
$java\
$lua\
$ruby\
$dotnet\
$swift\
$cmd_duration\
$memory_usage\
$jobs\
$status\
$battery\
$time\
\n$character
"""

# Campo topografico: fluido ma governato
[fill]
symbol = "┈"
style = "fg:{{ terminal['bright-black'] }}"

# -------------------------
# Core identity (left)
# -------------------------
[os]
disabled = false
style = "bg:{{ terminal['black'] }} fg:{{ terminal['blue'] }}"
format = "[ $symbol ]($style) "
[os.symbols]
Arch = "󰣇"

[username]
disabled = false
show_always = false
style_user = "bg:{{ terminal['black'] }} fg:{{ terminal['bright-cyan'] }}"
style_root = "bg:{{ terminal['black'] }} fg:{{ terminal['bright-red'] }} bold"
format = "[ $user ]($style) "

[hostname]
disabled = false
ssh_only = true
style = "bg:{{ terminal['black'] }} fg:{{ terminal['bright-black'] }}"
format = "[ $hostname ]($style) "

[directory]
style = "bg:{{ terminal['black'] }} fg:{{ terminal['bright-white'] }}"
read_only = " "
read_only_style = "bg:{{ terminal['black'] }} fg:{{ terminal['red'] }}"
format = "[ $path ]($style)[$read_only]($read_only_style) "
truncation_length = 3
truncation_symbol = "…/"
home_symbol = "~"
truncate_to_repo = true
use_os_path_sep = true

# (tolte le substitutions con icone: ora solo nomi directory, pulito)

# -------------------------
# Git (core = gemma, status = controllo)
# -------------------------
[git_branch]
symbol = ""
style = "bg:{{ terminal['black'] }} fg:{{ terminal['blue'] }}"
format = "[ $symbol $branch ]($style) "

[git_status]
style = "bg:{{ terminal['black'] }} fg:{{ terminal['bright-black'] }}"
format = "[ $all_status$ahead_behind ]($style) "

conflicted  = "[≠${count}](fg:{{ terminal['bright-red'] }})"
ahead       = "[⇡${count}](fg:{{ terminal['bright-blue'] }})"
behind      = "[⇣${count}](fg:{{ terminal['blue'] }})"
diverged    = "[⇕⇡${ahead_count}⇣${behind_count}](fg:{{ terminal['bright-magenta'] }})"
up_to_date  = "[·](fg:{{ terminal['bright-black'] }})"

untracked   = "[?${count}](fg:{{ terminal['bright-cyan'] }})"
stashed     = "[*${count}](fg:{{ terminal['magenta'] }})"
modified    = "[!${count}](fg:{{ terminal['yellow'] }})"
staged      = "[+${count}](fg:{{ terminal['green'] }})"
renamed     = "[»${count}](fg:{{ terminal['cyan'] }})"
deleted     = "[✘${count}](fg:{{ terminal['red'] }})"
typechanged = "[~${count}](fg:{{ terminal['bright-yellow'] }})"

[git_state]
style = "bg:{{ terminal['black'] }} fg:{{ terminal['yellow'] }}"
format = "[ $state( $progress_current/$progress_total) ]($style) "

[git_metrics]
disabled = false
only_nonzero_diffs = true
added_style = "bg:{{ terminal['black'] }} fg:{{ terminal['green'] }}"
deleted_style = "bg:{{ terminal['black'] }} fg:{{ terminal['red'] }}"
format = "[ +$added ]($added_style)[ -$deleted ]($deleted_style) "

# -------------------------
# Context / Cloud / IaC (secondari, coerenti)
# -------------------------
[docker_context]
style = "fg:{{ terminal['cyan'] }}"
format = "[ $context]($style) "

[kubernetes]
disabled = false
style = "fg:{{ terminal['cyan'] }}"
format = "[󱃾 $context(:$namespace)]($style) "

[aws]
style = "fg:{{ terminal['yellow'] }}"
symbol = " "
format = "[$symbol$profile(@$region)]($style) "

[gcloud]
style = "fg:{{ terminal['cyan'] }}"
symbol = "󰅟 "
format = "[$symbol$account(@$domain)(:$project)(@$region)]($style) "

[terraform]
style = "fg:{{ terminal['magenta'] }}"
symbol = "󱁢 "
format = "[$symbol$workspace]($style) "

[package]
style = "fg:{{ terminal['white'] }}"
symbol = "󰏗 "
format = "[$symbol$version]($style) "

# -------------------------
# Languages (uniformi = calm; icone ok)
# -------------------------
[nodejs]
style = "fg:{{ terminal['cyan'] }}"
symbol = " "
format = "[$symbol$version]($style) "

[python]
style = "fg:{{ terminal['cyan'] }}"
symbol = " "
format = "[$symbol $version$virtualenv]($style) "

[rust]
style = "fg:{{ terminal['cyan'] }}"
symbol = " "
format = "[$symbol$version]($style) "

[golang]
style = "fg:{{ terminal['cyan'] }}"
symbol = " "
format = "[$symbol$version]($style) "

[php]
style = "fg:{{ terminal['cyan'] }}"
symbol = " "
format = "[$symbol$version]($style) "

[java]
style = "fg:{{ terminal['cyan'] }}"
symbol = " "
format = "[$symbol$version]($style) "

[lua]
style = "fg:{{ terminal['cyan'] }}"
symbol = " "
format = "[$symbol$version]($style) "

[ruby]
style = "fg:{{ terminal['cyan'] }}"
symbol = " "
format = "[$symbol$version]($style) "

[dotnet]
style = "fg:{{ terminal['cyan'] }}"
symbol = "󰪮 "
format = "[$symbol$version]($style) "

[swift]
style = "fg:{{ terminal['cyan'] }}"
symbol = " "
format = "[$symbol$version]($style) "

# -------------------------
# Utilities (silenziose)
# -------------------------
[cmd_duration]
min_time = 750
style = "fg:{{ terminal['bright-black'] }}"
format = "[ $duration]($style) "

[memory_usage]
disabled = false
threshold = 75
style = "fg:{{ terminal['bright-black'] }}"
format = "[󰍛 ${ram}( | ${swap})]($style) "

[jobs]
style = "fg:{{ terminal['bright-black'] }}"
symbol = "󰜎 "
format = "[$symbol$number]($style) "

[status]
disabled = false
style = "fg:{{ terminal['red'] }}"
format = "[✖ $status]($style) "

[battery]
disabled = false
format = "[$symbol$percentage]($style) "
charging_symbol = "󰂄 "
discharging_symbol = "󰂃 "
full_symbol = "󰁹 "
unknown_symbol = "󰂑 "
empty_symbol = "󰂎 "

[[battery.display]]
threshold = 10
style = "fg:{{ terminal['red'] }}"
[[battery.display]]
threshold = 30
style = "fg:{{ terminal['yellow'] }}"
[[battery.display]]
threshold = 100
style = "fg:{{ terminal['green'] }}"

# FIX: niente nesting, formato valido
[time]
disabled = false
time_format = "%R"
style = "fg:{{ terminal['bright-magenta'] }}"
format = "[ $time]($style) "

# Signature
[character]
success_symbol = "[▸](fg:{{ terminal['blue'] }})[●](fg:{{ terminal['bright-magenta'] }}) "
error_symbol   = "[▸](fg:{{ terminal['red'] }})[●](fg:{{ terminal['bright-magenta'] }}) "
vimcmd_symbol  = "[◂](fg:{{ terminal['cyan'] }})[●](fg:{{ terminal['bright-magenta'] }}) "
