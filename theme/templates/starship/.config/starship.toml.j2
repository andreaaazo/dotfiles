"$schema" = "https://starship.rs/config-schema.json"

# ──────────────────────────────────────────────────────────────────────────────
# ANDREA ZORZI — STUDIO MODE (dense, controllato, premium)
# ──────────────────────────────────────────────────────────────────────────────

palette = "zorzi"
add_newline = true
command_timeout = 1000
scan_timeout = 30

# Studio = più contesto, stessa calma:
# - riga 1: “sistema + repo + runtime + env” (con campo topografico)
# - riga 2: comando (▸●) + indicatori utili (shell, jobs)
format = """
$status\
$sudo\
$username\
$hostname\
$directory\
$git_branch\
$git_status\
$git_state\
$git_commit\
$git_metrics\
$nix_shell\
$direnv\
$terraform\
$kubernetes\
$docker_context\
$package\
$nodejs\
$python\
$rust\
$golang\
$fill\
$memory_usage\
$cmd_duration\
$time
$character"""

# Texture/campo (topography)
[fill]
symbol = "┈"
style  = "fg:mute"

# ──────────────────────────────────────────────────────────────────────────────
# CORNICI MODULARI (UI components)
# ──────────────────────────────────────────────────────────────────────────────

[status]
disabled = false
format = "[⟦](fg:mute)[✕ $status]($style)[⟧](fg:mute) "
style  = "fg:danger"

[sudo]
disabled = false
format = "[⟦](fg:mute)[sudo]($style)[⟧](fg:mute) "
style  = "fg:warn"

[username]
show_always = false
format = "[⟦](fg:mute)[$user]($style)[⟧](fg:mute) "
style_user = "fg:text"
style_root = "fg:danger bold"

[hostname]
ssh_only = true
format = "[⟦](fg:mute)[$hostname]($style)[⟧](fg:mute) "
style  = "fg:info"

[directory]
format = "[⟦](fg:mute)[$path]($style)[$read_only]($read_only_style)[⟧](fg:mute) "
style = "fg:text"
repo_root_style = "fg:core"
before_repo_root_style = "fg:text"

truncation_length = 5
truncation_symbol = "…/"
home_symbol = "~"
truncate_to_repo = true
use_os_path_sep = true

read_only = " "
read_only_style = "fg:warn"

# ──────────────────────────────────────────────────────────────────────────────
# GIT (più completo: stato, commit, metrics — ma sempre “silenzioso”)
# ──────────────────────────────────────────────────────────────────────────────

[git_branch]
format = "[⟦](fg:mute)[⎇ $branch]($style)[⟧](fg:mute) "
style  = "fg:core"
truncation_length = 28

[git_status]
format = "[⟦](fg:mute)[$all_status$ahead_behind]($style)[⟧](fg:mute) "
style  = "fg:glow"

conflicted = "≠$count"
ahead      = "⇡$count"
behind     = "⇣$count"
diverged   = "⇡$ahead_count⇣$behind_count"
untracked  = "?$count"
stashed    = "*$count"
modified   = "~$count"
staged     = "+$count"
renamed    = "»$count"
deleted    = "−$count"

[git_state]
format = "[⟦](fg:mute)[$state( $progress_current/$progress_total)]($style)[⟧](fg:mute) "
style  = "fg:warn"

[git_commit]
commit_hash_length = 8
only_detached = false
tag_disabled = false
format = "[⟦](fg:mute)[@$hash$tag]($style)[⟧](fg:mute) "
style  = "fg:info"

[git_metrics]
disabled = false
format = "[⟦](fg:mute)[+$added]($added_style)[ −$deleted]($deleted_style)[⟧](fg:mute) "
added_style = "fg:ok"
deleted_style = "fg:danger"

# ──────────────────────────────────────────────────────────────────────────────
# ENV / INFRA (studio: vedere contesti senza rumore)
# ──────────────────────────────────────────────────────────────────────────────

[nix_shell]
disabled = false
format = "[⟦](fg:mute)[nix $state]($style)[⟧](fg:mute) "
style  = "fg:info"

[direnv]
disabled = false
format = "[⟦](fg:mute)[direnv $status]($style)[⟧](fg:mute) "
style  = "fg:info"

[terraform]
disabled = false
format = "[⟦](fg:mute)[tf $workspace]($style)[⟧](fg:mute) "
style  = "fg:info"

[kubernetes]
disabled = false
format = "[⟦](fg:mute)[k8s $context(::$namespace)]($style)[⟧](fg:mute) "
style  = "fg:info"

[docker_context]
only_with_files = true
format = "[⟦](fg:mute)[docker $context]($style)[⟧](fg:mute) "
style  = "fg:info"
symbol = ""

# ──────────────────────────────────────────────────────────────────────────────
# BUILD / RUNTIME (dato tecnico = info, non “gemma”)
# ──────────────────────────────────────────────────────────────────────────────

[package]
disabled = false
format = "[⟦](fg:mute)[pkg $version]($style)[⟧](fg:mute) "
style  = "fg:info"

[nodejs]
format = "[⟦](fg:mute)[node $version]($style)[⟧](fg:mute) "
style  = "fg:info"
symbol = ""

[python]
format = "[⟦](fg:mute)[py ${pyenv_prefix}${version}${virtualenv}]($style)[⟧](fg:mute) "
style  = "fg:info"
symbol = ""

[rust]
format = "[⟦](fg:mute)[rs $version]($style)[⟧](fg:mute) "
style  = "fg:info"
symbol = ""

[golang]
format = "[⟦](fg:mute)[go $version]($style)[⟧](fg:mute) "
style  = "fg:info"
symbol = ""

# ──────────────────────────────────────────────────────────────────────────────
# TELEMETRIA (precisione, ma solo quando utile)
# ──────────────────────────────────────────────────────────────────────────────

[memory_usage]
disabled = false
threshold = 70
format = "[⟦](fg:mute)[mem $ram( | $swap)]($style)[⟧](fg:mute) "
style  = "fg:mute"

[cmd_duration]
min_time = 300
show_milliseconds = false
format = "[⟦](fg:mute)[$duration]($style)[⟧](fg:mute) "
style  = "fg:mute"

[time]
disabled = false
time_format = "%H:%M"
format = "[⟦](fg:mute)[$time]($style)[⟧](fg:mute)"
style  = "fg:mute"

# ──────────────────────────────────────────────────────────────────────────────
# PROMPT (firma: direzione + core)
# ──────────────────────────────────────────────────────────────────────────────

[character]
success_symbol = "[▸](fg:core)[●](fg:glow) "
error_symbol   = "[▸](fg:danger)[●](fg:glow) "
vimcmd_symbol  = "[◂](fg:info)[●](fg:glow) "

[line_break]
disabled = false

# ──────────────────────────────────────────────────────────────────────────────
# PALETTE (ANSI-16 only, via Jinja)
# ──────────────────────────────────────────────────────────────────────────────
[palettes.zorzi]
bg     = "{{ terminal.background }}"
text   = "{{ terminal.foreground }}"
cursor = "{{ terminal.cursor }}"

core   = "{{ terminal.blue }}"
glow   = "{{ terminal['bright-magenta'] }}"
info   = "{{ terminal.cyan }}"
ok     = "{{ terminal.green }}"
warn   = "{{ terminal.yellow }}"
danger = "{{ terminal.red }}"
mute   = "{{ terminal['bright-black'] }}"

black   = "{{ terminal.black }}"
red     = "{{ terminal.red }}"
green   = "{{ terminal.green }}"
yellow  = "{{ terminal.yellow }}"
blue    = "{{ terminal.blue }}"
magenta = "{{ terminal.magenta }}"
cyan    = "{{ terminal.cyan }}"
white   = "{{ terminal.white }}"

bright_black   = "{{ terminal['bright-black'] }}"
bright_red     = "{{ terminal['bright-red'] }}"
bright_green   = "{{ terminal['bright-green'] }}"
bright_yellow  = "{{ terminal['bright-yellow'] }}"
bright_blue    = "{{ terminal['bright-blue'] }}"
bright_magenta = "{{ terminal['bright-magenta'] }}"
bright_cyan    = "{{ terminal['bright-cyan'] }}"
bright_white   = "{{ terminal['bright-white'] }}"
